# Как выбрать криптовалюту и не потерять деньги: иллюзия "золотого ключика" и альтернатива для разумных инвесторов

## Интерес к крипте в России растёт — но что за ним стоит?

По данным Wordstat.Yandex.ru, количество запросов об инвестициях в криптовалюту выросло в 5 раз за 2024 год. Люди ищут, куда вложиться. И чаще всего — ищут "лучшую монету". Ту самую, которая сделает x100.

Но реальность такова, что:

- 73% новичков ожидают таких иксов (данные Binance Research, 2022),
- 95% выпущенных токенов полностью обесценились и были заброшены разработчиками (по данным DeadCoins — сайта, отслеживающего «умершие» проекты: скам, хаки, отсутствие активности или ликвидности).

Из тысяч токенов, выпущенных за последние 5 лет, только 23 показали рост хотя бы в 100 раз — и большая часть этого роста происходила в условиях низкой ликвидности или манипуляций на старте. Шанс выбрать такую монету заранее — практически нулевой.

Почему так происходит — и можно ли вложиться в крипту по-взрослому?

## Почему мы все считаем себя умнее, чем есть

88% американцев считают себя водителями выше среднего. 65% — креативнее большинства. А участники тестов на грамотность с самыми провальными результатами стабильно считают, что у них всё ок.

Ну вы поняли, да? Это, конечно, всё про кого-то другого. Мы-то с вами умные, мы разберёмся. Сейчас чуть-чуть проанализируем рынок, пройдем курсы по трейдингу — и точно найдём монету, которая вырастет в 100 раз.

(Спойлер: нет.)

Мы хотим верить, что сможем выбрать победителя. Но мы не можем этого сделать даже на традиционных рынках акций или недвижимости. Ситуация на крипторыноке гораздо сложнее: он моложе, более волатилен, и движется не хорошо понятыми методами анализа, а нарративами.

## Что говорит история: стратегия "золотого ключика" почти всегда проигрывает

Мы сравнили две стратегии:

1. **Поиск одного победителя** — ставка на монету мечты, которая якобы принесет x100.
2. **Индексный подход** — покупка топовых монет по капитализации и регулярная ребалансировка.

Чтобы объективно оценить их, мы применили **бэктестинг** — метод, который используют профессиональные инвесторы для проверки стратегий на исторических данных.

Как это работает:

- Берутся архивные цены активов (в нашем случае — с 2018 по 2024 год).
- Задается стратегия: например, индексный портфель с ежемесячной ребалансировкой.
- Программа «проигрывает» поведение этой стратегии, как будто вы инвестировали в прошлом.

Дисклеймер: бэктестинг — это не хрустальный шар. Он не может заглянуть в будущее (иначе он бы назывался future testing). Иногда стратегия, которая блестяще сработала на прошлых данных, в реальности разваливается — это называется переоптимизация. Рынок меняется, и поведение, работавшее в 2020-м, в 2025-м может уже не сработать.

Мы симулировали крипто-бычку (бычий рынок, bull run) конца 2017. Многие тогда заинтересовались крипто, включая и автора. Му рассмотрели  десятки сценариев: инвестор входит на рынок в случайный день между взлетом и падением крипторынка и выходит 31 декабря 2024. Для сравнения брались 10 топ монет на момент входа на рынок и индексный портфель из них.

Результаты:

![Сравнение стратегий](https://raw.githubusercontent.com/lomonosov-n-fund/backtesting/refs/heads/main/demo1.png  "Сравнение стратегий")

На тепловой карте:

Красный — индекс обгоняет отдельную монету.
Зеленый — монета обгоняет индекс.

Итоги расчетов приведены в Таблице 1.


Таблица 1. Статистика по возврату рассмотренных стратегий.

| Актив | Худший<br>возврат, % | Усредненный<br>возврат, % | Вероятность<br>победы<br>индексной<br>стратегии, % | Вероятность<br>негативного<br>возврата, % |
|-------|-----------------|-------------------|-------------------|---------------------|
| index | 211.65 | 402.74 | 0.00% | 0.00% |
| btc | 371.02 | 559.97 | 14.52% | 0.00% |
| eth | 131.98 | 327.72 | 72.58% | 0.00% |
| bch | -88.29 | -77.79 | 100.00% | 100.00% |
| xrp | -39.48 | 182.19 | 79.03% | 19.35% |
| ltc | -72.50 | -50.33 | 100.00% | 98.39% |
| ada | -27.15 | 160.37 | 75.81% | 14.52% |
| iota | -94.52 | -91.19 | 100.00% | 100.00% |
| dash | -97.42 | -95.91 | 100.00% | 100.00% |
| xem | -98.70 | -96.69 | 100.00% | 100.00% |
| xmr | -64.86 | -42.81 | 100.00% | 98.39% |


Важные наблюдения:

- Покупка большинства (6 из 10) из наиболее капитализированных на то время монет принесла бы убытки
- Лишь биткойн (btc) обогнал индекс, разница приемлима (560% против 403%) в сравнении с проигрышем остальных монет
- Отдельные монеты могли обгонять индекс в отдельных точках, но чаще всего индекс оказывался более стабильным и доходным решением на дистанции

**Почему индексный подход работает?**


**Диверсификация** — не ставишь всё на одну карту
**Без угадайки** — топ-активы автоматически входят в портфель
**Стратегия против эмоций** — индексная структура защищает от паники и FOMA

Более подробно мы уже разбирали индексный подход в традиционном инвестировании [здесь](https://t.me/crypto_without_illusion/19)

## Как воспроизвести наши результаты?
Открытый питон код для бэктестинга выложен на GitHub: https://github.com/lomonosov-n-fund/backtesting. Используем библиотеку `backtrader` для симуляции стратегий. 

### Создаем класс `IndexComparisonStrategy` 

Наследуем от `backtrader.Strategy` - родительского класса для всех торговых стратегий. Это наследование предоставляет следующие ключевые возможности:

- Доступ к рыночным данным через self.datas
- Управление ордерами и позициями через self.broker

Основные методы родительского класса

- `__init__`: Инициализирует стратегию и её параметры
- `next`: Вызывается для каждой временной точки данных (в нашем случае раз в день) и проверяет, не пора ли провести ребалансировку портфеля.
- `stop`: Выполняется в конце бэктеста, используется для финальных расчетов и отчетности

### Ребалансировка портфеля 

Метод `next` раз в месяц вызывает `rebalance_portfolio` и поддерживает долю  активов согласно их рыночной капитализации.  Вот подробный разбор его ключевых операций:

**Сбор данных о рыночной капитализации**

```python
market_caps = {}
for data in self.datas:
    name = data._name
    if len(data) > 0 and data.close[0] > 0:
        market_caps[name] = data.lines.marketcap[0]
```

- Перебирает все доступные активы
- Фильтрует активы с нулевой ценой или отсутствующими данными
- Собирает текущую рыночную капитализацию для каждого валидного актива

**Расчет весов**

```python
total_market_cap = sum(market_caps.values())
weights = {name: cap / total_market_cap for name, cap in market_caps.items()}
```

- Вычисляет общую рыночную капитализацию всех активов
- Рассчитывает веса отдельных активов
- Создает словарь `weights`, сопоставляющий названия активов с их целевыми весами в портфеле

**Исполнение сделок**

```python
for data in self.datas:
    name = data._name
    if name in weights and data.close[0] > 0:
        self.order_target_percent(data, target=weights[name])
```

Для каждого актива с валидным весом и ненулевой ценой вызывает родительский метод self.order_target_percent для корректировки позиции до целевого веса. Метод order_target_percent автоматически:

- Рассчитывает необходимое количество акций для достижения целевого процента
- Размещает ордера на покупку или продажу по мере необходимости

### Ключевые особенности

- Взвешивание по рыночной капитализации: реализует пассивную индексную стратегию, где веса активов отражают их относительную рыночную капитализацию.
- Обработка нулевых цен: исключает активы с нулевой ценой, обеспечивая включение только активных активов.
- Автоматическая ребалансировка: Периодически корректирует веса портфеля для поддержания пропорций рыночной капитализации
- Управление ордерами: использует встроенную систему управления ордерами Backtrader для корректировки позиций

### Что можно настроить:

- Даты входа и выхода
- Набор монет
- Периодичность ребалансировки

Подробности использования скриптов в [README](https://github.com/lomonosov-n-fund/backtesting/blob/main/README.md)

## Выводы

- Крипта может быть частью инвестиционного портфеля. Но не стоит искать "монету судьбы".

- Крипторынок высокорискованный. Его рост последних 15 лет не гарантирует продолжения тренда. Разумный инвестор диверсифицирует активы, включая традиционные рынки.

- Индексный подход — это не хайп. Это стратегия, которую используют миллионы инвесторов на традиционном рынке. Она работает и здесь.

Если ты хочешь:

- понимать, как устроена крипта,
- не зависеть от чужих сигналов,
- инвестировать с холодной головой,

Подписывайся на канал "Крипта без иллюзий" — https://t.me/crypto_without_illusion, где мы разбираем практические аспекты криптоинвестиций.

